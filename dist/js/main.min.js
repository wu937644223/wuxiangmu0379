"use strict";var _createClass=function(){function i(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n}}();function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var n;function e(){_classCallCheck(this,e),this.url="../data/shop.json",this.load(),this.addEvent()}function t(){return n.apply(this,arguments)}new(_createClass(e,[{key:"addEvent",value:function(){var i=this;$(".store").on("click",function(n){var e=n||window.event,t=e.target||e.srcElement;"del"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),t.parentNode.parentNode.parentNode.remove(),i.removeCookie())}),$(".store").on("click",function(n){var e=n||window.event,t=e.target||e.srcElement;"left"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),1<t.parentNode.children[1].value?t.parentNode.children[1].value--:t.parentNode.children[1].value=1,i.val=t.parentNode.children[1].value,i.updateCookie())}),$(".store").on("click",function(n){var e=n||window.event,t=e.target||e.srcElement;"right"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),t.parentNode.children[1].value++,i.val=t.parentNode.children[1].value,i.updateCookie())})}},{key:"updateCookie",value:function(){var t=this,i=0;this.goods.some(function(n,e){return i=e,n.id==t.id})&&(this.goods[i].num=this.val),setCookie("goods",JSON.stringify(this.goods)),this.display()}},{key:"removeCookie",value:function(){var t=this,i=0;this.goods.some(function(n,e){return i=e,n.id==t.id})&&this.goods.splice(i,1),setCookie("goods",JSON.stringify(this.goods))}},{key:"load",value:function(){var e=this;ajax({url:this.url,success:function(n){e.res=JSON.parse(n),e.getCookie()}})}},{key:"getCookie",value:(n=function(){this.goods=getCookie("goods")?JSON.parse(getCookie("goods")):[],this.display()},t.toString=function(){return n.toString()},t)},{key:"selectAll",value:function(){$("#selectall").on("click",function(){1==this.checked?$(".selectone").prop("checked",!0):$(".selectone").prop("checked",!1)}),this.allPrice($("#selectall")),$(".selectone").on("click",function(){$(".selectone").length==$(".selectone:checked").length?$("#selectall").prop("checked",!0):$("#selectall").prop("checked",!1)}),this.allPrice($(".selectone"))}},{key:"allPrice",value:function(n){var l=this,r=document.querySelectorAll(".selectone");n.on("click",function(){for(var n=[],e=l.sum=0;e<$(".selectone").length;e++)if($(".selectone")[e].checked){var t=$(".selectone").eq(e).parent().parent().attr("index"),i=r[e].parentNode.parentNode.children[1].children[0].children[0].src,o=r[e].parentNode.parentNode.children[1].children[1].children[0].innerHTML,s=r[e].parentNode.parentNode.children[2].children[1].children[1].value,a=r[e].parentNode.parentNode.children[2].children[0].innerHTML.replace("￥","");n.push({id:t,img:i,name:o,price:a,num:s}),$.cookie("order",JSON.stringify(n)),console.log($(".selectone")[e].checked),l.sum+=parseInt(r[e].parentNode.nextElementSibling.nextElementSibling.children[2].innerHTML.replace("￥",""))}$(".sum p span i").html(l.sum)})}},{key:"display",value:function(){for(var n="",e=0;e<this.res.length;e++)for(var t=0;t<this.goods.length;t++)if(this.res[e].id==this.goods[t].id){var i=parseFloat(this.goods[t].num)*parseFloat(this.res[e].price);n+='<div class="goods" index="'+this.goods[t].id+'">\n                                    <span class="span-box">\n                                        <input class="selectone" type="checkbox">\n                                    </span>\n                                    <a class="goods-a" href="#">\n                                        <div class="goods-img fl">\n                                            <img src="'+this.res[e].img+'" alt="">\n                                        </div>\n                                        <div class="goods-txt fl">\n                                            <p>'+this.res[e].name+'</p>\n                                        </div>\n                                    </a>\n                                    <ul class="fr">\n                                        <li>💰'+this.res[e].price+'</li>\n                                        <li>\n                                            <span class="left">-</span>\n                                            <input type="text" value="'+this.goods[t].num+'" readonly>\n                                            <span class="right">+</span>\n                                        </li>\n                                        <li>😭'+i+'</li>\n                                        <li><a class="del" href="javascript:;">⛔</a></li>\n                                    </ul>\n                                </div>'}$(".store").html(n),0<this.goods.length?($(".car-empty").stop().hide(),$(".car-goods").stop().show()):($(".car-empty").stop().show(),$(".car-goods").stop().hide()),this.selectAll()}}]),e),$(".goods-sum .pay").on("click",function(){})}(),function(){$(".close").on("click",function(){$(".header-top").stop().slideUp(500)}),$(".ser").find("a").eq(1).hover(function(){$(".slideBox").stop().slideDown(300)},function(){$(".slideBox").stop().slideUp(300)}),$(".slideBox").hover(function(){$(".slideBox").stop().slideUp(300).stop().show()},function(){$(".slideBox").stop().slideUp(300)}),$(".sb-left input").on("focus",function(){$(".slideBox1").stop().show()}),$(".sb-left input").on("blur",function(){$(".slideBox1").stop().hide()}),$(".banner").fade({img:$(".banner").find(".image").find("img"),prev:$(".banner").find(".btn").find(".prev"),next:$(".banner").find(".btn").find(".next"),points:$(".banner").find(".points"),autoplay:!0,current:0,delay:4e3,duration:500}),window.onscroll=function(){if(204<document.documentElement.scrollTop){$(".index-nav").css({position:"fixed",left:"0",top:"0",zIndex:99999}),$(".nav .hidden").css("display","block"),$(".nav .list-h").find("span").empty();var n=$('<img src="../assets/img/logo-s.jpg">');$(".nav .list-h").find("span").append(n)}else{$(".index-nav").css({position:"relative",left:"0",top:"0"}),$(".nav .hidden").css("display","none"),$(".nav .list-h").find("span").empty();$(".nav .list-h").find("span").append("全部内容")}};for(var n=function(n){$(".main .main1").find("a").eq(n).hover(function(){$(".main .main1").find("a").eq(n).find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".main .main1").find("a").eq(n).find("img").css({transition:"1s",transform:"scale(1)"})})},e=0;e<$(".main .main1").find("a").length;e++)n(e);$(".spec1 .show .show-a").hover(function(){$(".spec1 .show .show-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".show .show-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".show-banner").banner({img:$(".show-banner").find("ul").find("li"),prev:$(".show-banner .btn .prev"),next:$(".show-banner .btn .next"),autoplay:!0,current:0,delay:5e3,duration:500}),$(".discount").fade({img:$(".discount").find("a"),prev:$(".discount").find(".btn").find(".prev"),next:$(".discount").find(".btn").find(".next"),points:$(".discount").find(".points"),autoplay:!0,current:0,delay:4e3,duration:500}),$(".spec2 .hot-sale .hot-sale-a").hover(function(){$(".spec2 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main4-banner").banner2({img:$(".main4-banner").find("ul").find("li"),prev:$(".main4-banner .btn .prev"),next:$(".main4-banner .btn .next"),current:0,delay:5e3,duration:500}),$(".main4 .show .show-a").hover(function(){$(".main4 .show .show-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".show .show-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main5 .hot-sale .hot-sale-a").hover(function(){$(".main5 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main6 .hot-sale .hot-sale-a").hover(function(){$(".main6 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main7 .hot-sale .hot-sale-a").hover(function(){$(".main7 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".main7 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})});var t=function(n){$(".main7 .hot-sale .hot-sale-img li").eq(n).hover(function(){$(".main7 .hot-sale .hot-sale-img li").eq(n).find(".li-content").stop().slideDown(300)},function(){$(".li-content").stop().slideUp(100)})};for(e=0;e<12;e++)t(e);var i=$(".main7").find(".m7-banner").find(".hot-sale"),o=$(".main7 .btn .prev"),s=$(".main7 .btn .next"),a=0,l=i.length;function r(n){i.eq(n).stop().show().siblings().stop().hide(),$(".main7 .title ul").find("li").eq(n).addClass("active").siblings().removeClass("active")}s.on("click",function(){++a===l&&(a=0),r(a)}),o.on("click",function(){-1===--a&&(a=l-1),r(a)}),$(".main7 .title ul").find("li").on("mouseenter",function(){r(a=$(this).index())});var c=$(".main8").find(".main8-banner").find(".img"),d=$(".main8 .btn .prev"),h=$(".main8 .btn .next"),u=0,f=c.length;function m(n){c.eq(n).stop().show().siblings().stop().hide(),$(".main8 .title ul").find("li").eq(n).addClass("active").siblings().removeClass("active")}h.on("click",function(){++u===f&&(u=0),m(u)}),d.on("click",function(){-1===--u&&(u=f-1),m(u)}),$(".main8 .title ul").find("li").on("mouseenter",function(){m(u=$(this).index())}),$(".main9 .hot-sale .hot-sale-a").hover(function(){$(".main9 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})});var p=function(n){$(".main10 .hot-sale").find("a").eq(n).hover(function(){$(".main10 .hot-sale").find("a").eq(n).find("img").css({transition:"1s",transform:"scale(1.1)"})},function(){$(".main10 .hot-sale").find("a").eq(n).find("img").css({transition:"1s",transform:"scale(1)"})})};for(e=0;e<$(".main10 .hot-sale").find("a").length;e++)p(e);var g=function(n){$(".main11 .hot-sale").find("a").eq(n).hover(function(){$(".main11 .hot-sale").find("a").eq(n).find("img").css({transition:"1s",transform:"scale(1.1)"})},function(){$(".main11 .hot-sale").find("a").eq(n).find("img").css({transition:"1s",transform:"scale(1)"})})};for(e=0;e<$(".main11 .hot-sale").find("a").length;e++)g(e);getCookie("user")&&getCookie("password")&&($.cookie("isLogin",!0),$.cookie("isLogin")&&($(".sign-ready").html("退出"),$(".header-bottom .sign-logon").html(getCookie("user"))),$(".sign-ready").on("click",function(){$.cookie("isLogin",!1),$(".header-bottom .sign-ready").html("请登录"),$(".header-bottom .sign-logon").html("注册即送3500元大礼包")}))}(),function(){var t=!1,i=!1,o=!1,s=!1,a=document.getElementById("txt1"),e=document.getElementById("txt2"),l=document.getElementById("txt3"),n=document.getElementById("txt4"),r=(document.getElementById("register"),document.querySelector(".content div:nth-child(1) i")),c=document.querySelector(".content div:nth-child(2) i"),d=document.querySelector(".content div:nth-child(3) i"),h=document.querySelector(".content div:nth-child(4) i");document.querySelector(".content div:nth-child(5) i");$("#txt1").on("blur",function(){var n=a.value;/^1\d{10}$/.test(n)?(t=!0,r.style.display="none"):(r.style.display="block",t=!1)}),$("#txt1").on("focus",function(){r.style.display="none"}),$("#txt2").on("blur",function(){var n=e.value;i=!!/^\d{6}$/.test(n)||!(c.style.display="block")}),$("#txt2").on("focus",function(){c.style.display="none"}),$("#txt3").on("blur",function(){var n=l.value;o=!!/^[\w-]{6,20}$/.test(n)||!(d.style.display="block")}),$("#txt3").on("focus",function(){d.style.display="none"}),$("#txt4").on("blur",function(){s=n.value===l.value||!(h.style.display="block")}),$("#txt4").on("focus",function(){h.style.display="none"}),$("#register").on("click",function(){if(t&&i&&o&&s){var n=a.value,e=l.value;$.cookie("user",n),$.cookie("password",e),window.location.href="sign.html"}else alert("注册失败")})}(),function(){for(var n=function(n){$(".detail .s-img li").eq(n).hover(function(){$(".detail .img img").eq(n).stop().show().siblings().stop().hide(),$(".detail .s-img li").eq(n).addClass("active").siblings().removeClass("active")})},e=0;e<$(".detail .s-img li").length;e++)n(e);function t(){this.box=document.querySelector(".detail .img"),this.img=document.querySelector(".detail .img img"),this.init()}$(".button .add").on("click",function(){window.location.href="car.html"}),t.prototype.init=function(){var t=this;$(".detail .img").on("mouseover",function(n){t.show()}),$(".detail .img").on("mouseout",function(){t.hide()}),$(".detail .img").on("mousemove",function(n){var e=n||window.event;t.move(e)})},t.prototype.show=function(){$(".detail .img img").css("transform","scale(2)")},t.prototype.hide=function(){$(".detail .img img").css("transform","scale(1)"),$(".detail .img img").css({left:0,top:0})},t.prototype.move=function(n){var e=n.clientX-this.box.offsetLeft,t=n.clientY-this.box.offsetTop;e<0&&(e=0),e>this.box.offsetWidth&&(e=this.box.offsetWidth),t<0&&(t=0),t>this.box.offsetHeight&&(t=this.box.offsetHeight),$(".detail .img img").css({left:250-n.offsetX+"px",top:250-n.offsetY+"px"})},new t}(),function(){var n;function e(){_classCallCheck(this,e),this.url="../data/shop.json",this.lb=document.querySelector(".list-box"),this.load()}function t(){return n.apply(this,arguments)}new(_createClass(e,[{key:"load",value:function(){var e=this;ajax({url:this.url,success:function(n){e.res=JSON.parse(n),e.display(),e.sortPrice(),e.addEvent()}})}},{key:"sortPrice",value:function(){var n=0,e=this;$(".right-top li .sort").on("click",function(){n=0===n?(e.res.sort(function(n,e){return e.price-n.price}),e.display(),1):(e.res.sort(function(n,e){return n.price-e.price}),e.display(),0)})}},{key:"display",value:function(){for(var n="",e=0;e<this.res.length;e++)n+='<li index="'+this.res[e].id+'">\n                            <a href="#"><img src="'+this.res[e].img+'" alt=""></a>\n                            <div class="content">\n                                <p>\n                                    <em>月付</em>\n                                    <span>'+this.res[e].price1+" </span>\n                                    <span>|￥<i>"+this.res[e].price+'</i></span>\n                                </p>\n                                <a href="#">'+this.res[e].name+'</a>\n                                <span class="sale">'+this.res[e].sale+'</span>\n                                <p>免息分期</p>\n                                <p><a class="add" href="#">加入购物车</a></p>\n                            </div>\n                        </li>';$(".list-box").html(n)}},{key:"addEvent",value:function(){var i=this;$(".list-box").on("click",function(n){var e=n||window.event,t=e.target||e.srcElement;"add"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),console.log(i.id),i.setCookie())}),$(".list-box").on("click","img",function(){window.location.href="shop-content.html"})}},{key:"setCookie",value:(n=function(){if(console.log(1),this.goods=getCookie("goods")?JSON.parse(getCookie("goods")):[],this.goods.length<1)this.goods.push({id:this.id,num:1});else{for(var n=1,e=0;e<this.goods.length;e++)this.goods[e].id===this.id&&(this.goods[e].num++,n=0);1==n&&this.goods.push({id:this.id,num:1})}setCookie("goods",JSON.stringify(this.goods))},t.toString=function(){return n.toString()},t)}]),e)}(),function(){$(".way .span1").on("click",function(){$(".sign-user").stop().show(),$(".sign-ma").stop().hide(),$(".way .span1").addClass("active1").siblings().removeClass("active1")}),$(".way .span2").on("click",function(){$(".sign-user").stop().hide().removeClass("active1"),$(".sign-ma").stop().show().addClass("active1"),$(".way .span2").addClass("active1").siblings().removeClass("active1")});var t=document.querySelector(".sign-user .txt1"),i=document.querySelector(".sign-user .txt2");$("#sub").on("click",function(){var n=t.value,e=i.value;n===getCookie("user")&&e===getCookie("password")?window.location.href="index.html":alert("登录失败，请重新登录")})}();